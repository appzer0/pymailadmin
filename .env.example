# .env.example
# Copy this file as ".env" and modify it to suit your needs.

# A common name to display in pages and emails:
PRETTY_NAME="pymailadmin"

# The base URL to access pymailadmin:
PYMAILDMIN_URL="https://mydopemailadmin.domain.tld"

# Language for the web interface (ISO 639-1 + region, underscored, e.g. fr_FR, en_US, es_ES)
# Defaults to en_US if not set
APP_LANGUAGE=en_US

# Unique 64-char secret key. You may use `pwgen -Ans 64 1`:
SECRET_KEY=your-64-char-secret-key-here 

# SMTP settings for mail notifications:
MAIL_SMTP_HOST=smtp.domain.tld
MAIL_SMTP_PORT=465
MAIL_SMTP_USERNAME=smtpuser
MAIL_SMTP_PASSWORD=smtppw
MAIL_FROM_EMAIL=no-reply@domain.tld
MAIL_FROM_NAME=Mail Server Admin

# MySQL connection settings:
DB_HOST=127.0.0.1
DB_NAME=dbname
DB_USER=sqluser
DB_PASSWORD=sqlpassword

# Static dir:
STATIC_DIR=/var/www/pymailadmin/static

# CSS filename:
CSS_MAIN=main.css

# Rate limiting for login:
LOGIN_MAX_ATTEMPTS=5
LOGIN_WINDOW_MINUTES=15
LOGIN_BLOCK_MINUTES=30

# Rate limiting for registering:
REGISTER_MAX_ATTEMPTS_PER_IP=3
REGISTER_WINDOW_MINUTES=60
REGISTER_BLOCK_MINUTES=60

# Maximum number of mailboxes per user:
MAX_MAILBOXES_PER_USER=3

# Maximum number of aliases per mailbox:
MAX_ALIASES_PER_MAILBOX=100

# Your Postfix separator character for dynamic aliases (usually "+")
POSTFIX_SEPARATOR=+

## HASH ALGORITHM FOR MAILBOX PASSWORDS
## Supported: argon2id, argon2i, bcrypt, sha512-crypt, sha256-crypt, pbkdf2
## Example:
## DOVECOT_HASH=argon2id          # argon2id, argon2i, bcrypt, sha512-crypt, sha256-crypt, pbkdf2
## DOVECOT_HASH_PREFIX={ARGON2ID} # Optional, will be automatically chosen if left blank

# argon2id, argon2i, bcrypt, sha512-crypt, sha256-crypt or pbkdf2:
DOVECOT_HASH=argon2id           

# Optional, will be automatically chosen if left blank:
DOVECOT_HASH_PREFIX=

# Hashing parameters and cost, only for argon2i and argon2id:
DOVECOT_ARGON2_TIME_COST=3
DOVECOT_ARGON2_MEMORY_COST=65536
DOVECOT_ARGON2_PARALLELISM=2

# Only for BCRYPT:
DOVECOT_BCRYPT_ROUNDS=12       

# Only for PBKDF2:
DOVECOT_PBKDF2_ROUNDS=480000   

# ============================================
# DATABASE SCHEMA CUSTOMIZATION
# ============================================
# Adapt these variables to match your existing Dovecot/Postfix database structure.
# pymailadmin will automatically generate SQL queries based on these settings.
#
## EXAMPLE: you use the "mailboxes" table name to store users, in which
## your use the "password_hash" column for storing hashes. "domain_id"
## column stores the foreign key storing domains IDs (from your domains'
## table). Your active/inactive mailboxes are tagged with an 'enabled'
## column, storing the values '0' or '1'.Then your variables will look like:
##
## # Table name for mailboxes/users:
## DB_TABLE_USERS=mailboxes
## 
## # Field names:
## DB_FIELD_USER_ID=id
## DB_FIELD_USER_DOMAIN_ID=domain_id
## DB_FIELD_USER_EMAIL=email
## DB_FIELD_USER_PASSWORD=password_hash
## 
## # The Dovecot quota field, specified in bytes or human-readable (with G, M, etc.)
## DB_FIELD_USER_QUOTA=quota
## 
## # Active account field name (values: 0 or 1)
## DB_FIELD_USER_ACTIVE=enabled
##
## The tables/columns for storing domains and aliases are much simpler ones.
##
## END OF EXAMPLE

# --------------------------------------------
# 1. DOMAINS TABLE
# --------------------------------------------
# Table name for domains:
DB_TABLE_DOMAINS=domain

# Field names:
DB_FIELD_DOMAIN_ID=id
DB_FIELD_DOMAIN_NAME=domain

# --------------------------------------------
# 2. USERS/MAILBOXES TABLE
# --------------------------------------------
# - You will need a special field like "enabled" or "active" states in
#   your table structure. This field is mandatory for pymailadmin.
# - Replace "users" here with you users' table name
# - Replace "email" with your mailbox adresse field name.
#   The mailbox expected format is "user@domain.tld"
# - Replace ID fields "id" and "domain_id" here with you IDs fields name
# - Replace "crypt" field with the field name you use for storing
#   password hashes for Dovecot (the "{ARGON2ID}blahblah" hashes)

# Table name for mailboxes/users:
DB_TABLE_USERS=users

# Field names:
DB_FIELD_USER_ID=id
DB_FIELD_USER_DOMAIN_ID=domain_id
DB_FIELD_USER_EMAIL=email
DB_FIELD_USER_PASSWORD=crypt

# The Dovecot quota field, specified in bytes or human-readable (with G, M, etc.)
DB_FIELD_USER_QUOTA=quota

# Active account field name (values: 0 or 1)
DB_FIELD_USER_ACTIVE=active

# --------------------------------------------
# 3. ALIASES TABLE
# --------------------------------------------
# Table name for aliases:
DB_TABLE_ALIASES=alias

# Field names:
DB_FIELD_ALIAS_ID=id
DB_FIELD_ALIAS_DOMAIN_ID=domain_id
DB_FIELD_ALIAS_SOURCE=source
DB_FIELD_ALIAS_DESTINATION=destination
